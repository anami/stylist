(function(a,b,c){function d(a,b){return function d(){if(!d.timer){var e=arguments,f=this;d.timer=setTimeout(function(){a.apply(f,e),d.timer=c},b)}}}function e(a,b,c){for(var d,e=b.split(";"),f=0,g=e.length;g>f;f++)d=e[f].split(":"),c?a.style.removeProperty(d[0]):a.style.setProperty(d[0],d[1],"important")}function f(a,c){var d=b.createElement("li");e(d,"color:#555;display:block"),d.appendChild(b.createTextNode(c)),a.appendChild(d)}function g(){function c(){switch(A){case"B":e(w,"top:0;right:0;height:100%;width:300px",!0),e(w,"bottom:0;left:0;height:300px;width:100%;",!1),A="L";break;case"L":e(w,"bottom:0;left:0;height:300px;width:100%;",!0),e(w,"top:0;left:0;height:100%;width:300px",!1),A="T";break;case"T":e(w,"top:0;left:0;height:100%;width:300px",!0),e(w,"top:0;left:0;height:300px;width:100%",!1),A="R";break;case"R":e(w,"top:0;left:0;height:300px;width:100%",!0),e(w,"top:0;right:0;width:300px;height:100%",!1),A="B";break;default:alert("Unrecognized position")}}function g(){u.innerHTML=v.value,B()}function p(){var b=new Blob([v.value],{type:"text/plain;charset=UTF-8"});r=a.URL.createObjectURL(b,{oneTimeOnly:!0}),z.href=r,z.download="stylist_"+q()+".css",z.click(!1),a.URL.revokeObjectURL(r)}function q(){var a,b=new Date,c=b.getFullYear(),d=b.getMonth()+1,e=b.getDate(),f=b.getHours(),g=b.getMinutes(),g=b.getMinutes(),h=b.getSeconds(),i="_";return 10>d&&(d="0"+d),10>e&&(e="0"+e),10>f&&(f="0"+f),10>g&&(g="0"+g),10>h&&(h="0"+h),a=c+i+d+i+e+i+f+i+g+i+h}if(b.getElementById("stylist:panel"))return void alert("Stylist is already running - CTRL+M to open panel");var r,s=b.getElementsByTagName("head")[0],t=b.body,u=b.createElement("style"),v=b.createElement("textarea"),w=b.createElement("div"),x=b.createElement("h1"),y=b.createElement("ul"),z=b.createElement("a"),A="B";w.style.display="block",v.spellcheck=!1,v.id="stylist:input",w.id="stylist:panel",e(w,"position:fixed;top:0;right:0;width:300px;height:100%;z-index:2147483647;overflow:auto;outline:solid 1px #333;padding:10px 20px;borderTop:0;borderBottom:0;borderRight:0;borderLeft:1px solid #ccc;color:#222;background:#fcfcfc"),e(v,"font:13px Inconsolata, Consolas, Menlo, Monaco, Lucida Console, Courier New, Courier, monospace;width:100%;height:calc(100% - 140px);direction:ltr;textAlign:left;background:#fcfcfc"),e(z,"display:none;"),x.innerHTML="Stylist",e(x,"color:#555;background-color:#fcfcfc;width:150px;height:1.5em;margin:4px 0 4px 0;font-family:serif;font-size:20px;font-style:oblique"),e(y,"font:12px monospace;list-style:none;margin-left:-40px;margin-top:0px"),f(y,"CTRL+M: toggle this panel"),f(y,"CTRL+Y: change dock position"),f(y,"ALT+click: target element"),f(y,"CTRL+S: save CSS to file"),w.appendChild(x),w.appendChild(y),w.appendChild(v),w.appendChild(z),s.appendChild(u),t.appendChild(w),u.innerHTML=localStorage.siteStyle||"",v.value=u.innerHTML,v.placeholder="/* Enter your styles here. */",t.addEventListener("click",function(a){if(-1===v.style.display.indexOf("none")&&a.target.id!==v.id&&a.altKey){var b,c,d=0,e=a.target,f=e.className.split(" ")||"",g=[],h="",i="";for(i+=e.tagName.toLowerCase(),e.id&&(i+="#"+e.id),d=0;d<f.length;d++)n.test(f[d])||(i+="."+f[d]);if(e.getAttribute("style"))for(g=e.getAttribute("style").split(";"),d=0;d<g.length;d++)b=g[d].split(o).join(" ").trim(),n.test(b)||(h+=l+b.toLowerCase()+";\n");i&&(h=h?"{\n"+h+"}":"{\n\n}",c="\n"+i+" "+h,v.value+=c,v.focus(),v.setSelectionRange(v.value.length-c.length,v.value.length)),a.preventDefault()}});var B=d(function(){localStorage.siteStyle=u.innerHTML},500);v.addEventListener("keyup",g),v.addEventListener("change",g),v.addEventListener("keydown",function(a){var b=v.value,c=v.selectionStart;a.keyCode===h&&(v.value=b.substring(0,c)+l+b.substring(c),v.setSelectionRange(c+m,c+m),a.preventDefault())}),a.addEventListener("keydown",function(a){if(a.ctrlKey)switch(a.keyCode){case j:w.style.display="none"==w.style.display?"block":"none";break;case i:c();break;case k:try{p(),a.preventDefault()}catch(b){console.log(b),alert("Unable to save your file.")}}})}var h=9,i=89,j=77,k=83,l="    ",m=l.length,n=/^\s*$/,o=/\s+$/g;String.prototype.trim=function(){return this.replace(/(^\s+|\s+$)/g,"")},g()})(this,this.document);