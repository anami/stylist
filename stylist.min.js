(function(a,b,c){function d(a,b){return function d(){if(!d.timer){var e=arguments,f=this;d.timer=setTimeout(function(){a.apply(f,e),d.timer=c},b)}}}function e(a,b,c){for(var d,e=b.split(";"),f=0,g=e.length;g>f;f++)""!=e[f]&&(d=e[f].split(":"),console.log(d[0]),c?a.style.removeProperty(d[0]):a.style.setProperty(d[0],d[1]))}function f(a,c){var d=b.createElement("li");e(d,"color:#555;display:block"),d.appendChild(b.createTextNode(c)),a.appendChild(d)}function g(a){return a.toString().replace(/^[^\/]+\/\*!?/,"").replace(/\*\/[^\/]+$/,"")}function h(){function c(){switch(console.log(G),console.log(z),G){case"B":e(z,"bottom:;left:;height:;width:",!1),e(z,"top:0;right:0;height:100%;width:300px",!0),G="L";break;case"L":e(z,"top:;left:;height:;width:",!1),e(z,"bottom:0;left:0;height:300px;width:100%",!0),G="T";break;case"T":e(z,"top:;left:;height:;width:",!1),e(z,"top:0;left:0;height:100%;width:300px",!0),G="R";break;case"R":e(z,"top:;right:;width:;height:",!1),e(z,"top:0;left:0;height:300px;width:100%",!0),G="B";break;default:alert("Unrecognized position")}}function h(){x.innerHTML=I.checked?y.value:"",J()}function r(){var b=new Blob([y.value],{type:"text/plain;charset=UTF-8"});u=a.URL.createObjectURL(b,{oneTimeOnly:!0}),console.log(D),D.href=u,D.download="stylist_"+s()+".css",D.click(),a.URL.revokeObjectURL(u)}function s(){var a,b=new Date,c=b.getFullYear(),d=b.getMonth()+1,e=b.getDate(),f=b.getHours(),g=b.getMinutes(),h=b.getSeconds(),i="_";return 10>d&&(d="0"+d),10>e&&(e="0"+e),10>f&&(f="0"+f),10>g&&(g="0"+g),10>h&&(h="0"+h),a=c+i+d+e+f+g+h}function t(a){var c=z||b.getElementById("stylist:panel");c&&(c.style.display=a?"block":"none")}if(b.getElementById("stylist:panel"))return void t(!0);var u,v=b.getElementsByTagName("head")[0],w=b.body,x=b.createElement("style"),y=b.createElement("textarea"),z=b.createElement("div"),A=b.createElement("h1"),B=b.createElement("ul"),C=b.createElement("label"),D=b.createElement("a"),E=b.createElement("version"),F=b.createElement("button"),G=(b.createElement("button"),"B"),H=!!a.chrome;z.style.display="block",y.spellcheck=!1,y.id="stylist:input",z.id="stylist:panel";var I=b.createElement("input");I.setAttribute("type","checkbox"),I.setAttribute("checked","checked"),C.appendChild(I),C.appendChild(b.createTextNode("Apply CSS")),e(C,"font:12px monospace;vertical-align:middle;text-align:left"),e(I,"vertical-align:middle"),e(z,"position:fixed;top:0;right:0;width:300px;height:100%;z-index:2147483647;overflow:auto;outline:solid 1px #333;padding:0 20px;borderTop:0;borderBottom:0;borderRight:0;borderLeft:1px solid #ccc;color:#222;background:#fcfcfc"),e(y,"font:13px Inconsolata, Consolas, Menlo, Monaco, Lucida Console, Courier New, Courier, monospace;width:100%;height:calc(100% - 140px);direction:ltr;textAlign:left;background:#fcfcfc"),e(D,"display:none"),e(E,"font:9px monospace;color:#aaa;position:absolute;top:10px;right:20px"),E.innerHTML="v"+q,F.id="stylist:close",F.appendChild(b.createTextNode("&times;")),e(F,"position:absolute;top:10px;right:10px;cursor:pointer;width:16px;height:16px;font-size:8pt;text-align:center;vertical-align:middle;padding:0"),A.innerHTML="Stylist",e(A,"color:#555;background-color:#fcfcfc;width:150px;height:1.5em;margin:4px 0 4px 0;font-family:serif;font-size:20px;font-style:oblique;line-height:1.5em;box-shadow:none;text-shadow:none;text-align:left"),e(B,"font:12px monospace;list-style:none;margin-left:-40px;margin-top:0px");g(function(){});f(B,"CTRL+M: toggle this panel"),f(B,"CTRL+Y: change dock position"),f(B,"ALT+click: target element"),z.appendChild(A),z.appendChild(B),z.appendChild(C),z.appendChild(y),z.appendChild(E),v.appendChild(x),w.appendChild(z),H&&(f(B,"CTRL+S: save CSS to file"),z.appendChild(D)),x.innerHTML=localStorage.siteStyle||"",y.value=x.innerHTML,y.placeholder="/* Enter your styles here. */",w.addEventListener("click",function(a){if(-1===y.style.display.indexOf("none")&&a.target.id!==y.id&&a.altKey){var b,c,d=0,e=a.target,f=e.className.split(" ")||"",g=[],h="",i="";for(i+=e.tagName.toLowerCase(),e.id&&(i+="#"+e.id),d=0;d<f.length;d++)o.test(f[d])||(i+="."+f[d]);if(e.getAttribute("style"))for(g=e.getAttribute("style").split(";"),d=0;d<g.length;d++)b=g[d].split(p).join(" ").trim(),o.test(b)||(h+=m+b.toLowerCase()+";\n");i&&(h=h?"{\n"+h+"}":"{\n\n}",c="\n"+i+" "+h,y.value+=c,y.focus(),y.setSelectionRange(y.value.length-c.length,y.value.length)),a.preventDefault()}});var J=d(function(){localStorage.siteStyle=y.value},500);I.addEventListener("click",function(a){h()}),F.addEventListener("click",function(a){t(!1)}),y.addEventListener("keyup",h),y.addEventListener("change",h),y.addEventListener("keydown",function(a){var b=y.value,c=y.selectionStart;a.keyCode===i&&(y.value=b.substring(0,c)+m+b.substring(c),y.setSelectionRange(c+n,c+n),a.preventDefault())}),a.addEventListener("keydown",function(a){if(a.ctrlKey)switch(console.log(a.keyCode),a.keyCode){case k:t("none"===z.style.display);break;case j:c();break;case l:if(H)try{a.preventDefault(),r()}catch(b){console.log(b),alert("Unable to save your file.")}}})}var i=9,j=89,k=77,l=83,m="    ",n=m.length,o=/^\s*$/,p=/\s+$/g,q="1.3";String.prototype.trim=function(){return this.replace(/(^\s+|\s+$)/g,"")},h()})(this,this.document);